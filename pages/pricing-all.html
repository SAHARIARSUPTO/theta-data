<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Theta Data Dynamic Pricing</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="../css/custom-bootstrap.css" rel="stylesheet" />
    <link href="../css/header.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      crossorigin="anonymous"
    />
    <link href="../css/effects.css" rel="stylesheet" />
    <link href="css/pricing-table.css" rel="stylesheet" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <style>
      /* --- CSS Variables for new primary color --- */
      :root {
        --primary-teal: #00c49a;
        --primary-teal-dark: #00a37e;
        --highlight-red: #dc3545;
      }

      /* --- Toggling Styles --- */
      .price-mode-monthly,
      .price-mode-annual {
        display: none;
      }
      .price-mode-monthly.active,
      .price-mode-annual.active {
        display: inline;
      }

      /* --- Pricing Card Base Style (Height Consistency Focus) --- */
      .pricing-card-new {
        max-width: 350px;
        min-width: 280px; /* Reduced min-width slightly for small mobile devices */
        flex: 0 0 auto;
        scroll-snap-align: center;
        border: 1px solid #dee2e6;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        text-align: center;
        position: relative;
        overflow: hidden;
        background-color: #ffffff;
        transition: transform 0.3s, box-shadow 0.3s;

        /* Enforce minimum card height for consistency */
        min-height: 580px; /* A consistent height to accommodate varying list lengths */

        display: flex; /* Flex container for internal layout */
        flex-direction: column;
      }

      /* Highlighted Card (Standard) */
      .pricing-card-new.highlight {
        border: 2px solid var(--primary-teal);
        transform: scale(1.05);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      }

      /* Header Styling (New Color) */
      .card-header-new {
        background-color: var(--primary-teal);
        padding: 1.2rem 0; /* Reduced padding for mobile */
        color: #212529;
        font-weight: 700;
        border-radius: 8px 8px 0 0;
      }

      .card-header-new h4 {
        font-size: 1.5rem; /* Reduced font size for mobile */
        margin-bottom: 0.25rem;
        font-weight: 900;
      }

      .card-header-new p {
        font-size: 0.8rem;
        color: #343a40;
        margin-bottom: 0;
      }

      /* Body and Price */
      .card-body-new {
        padding: 1.5rem 1rem; /* Reduced padding for mobile */
        flex-grow: 1; /* Allows the body to take up remaining height */
        display: flex;
        flex-direction: column;
        justify-content: space-between; /* Pushes button to the bottom */
      }

      .card-price-new {
        font-size: 2.5rem; /* Reduced font size for mobile */
        font-weight: 900;
        line-height: 1;
        margin-bottom: 0.5rem;
        color: #212529;
      }

      .card-price-new small {
        font-size: 45%;
        font-weight: 400;
        color: #6c757d;
      }

      /* Feature List Styling */
      .card-features-new {
        list-style: none;
        padding: 0;
        margin-top: 1rem;
        text-align: left;
        flex-grow: 1; /* Critical: Allows feature list to expand for consistent card height */
      }

      .card-features-new li {
        padding: 0.4rem 0; /* Reduced padding for mobile */
        font-size: 0.9rem; /* Reduced font size for mobile */
        border-bottom: 1px dashed #e9ecef;
      }

      .card-features-new li:last-child {
        border-bottom: none;
      }

      .card-features-new svg {
        color: var(--primary-teal); /* Green/Teal checkmark */
        margin-right: 0.5rem;
      }

      /* POPULAR Ribbon Tag */
      .popular-ribbon {
        position: absolute;
        top: 15px;
        right: -30px;
        padding: 2px 30px;
        background-color: var(--highlight-red);
        color: white;
        font-weight: bold;
        text-transform: uppercase;
        font-size: 0.8rem;
        transform: rotate(45deg);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        z-index: 10;
      }

      /* Button Style (New Color) */
      .btn-subscribe-new {
        background-color: var(--primary-teal);
        border-color: var(--primary-teal);
        color: #212529;
        font-weight: 700;
        margin-top: 1rem;
        padding: 0.75rem 0;
      }
      .btn-subscribe-new:hover {
        background-color: var(--primary-teal-dark);
        border-color: var(--primary-teal-dark);
        color: #212529;
      }

      /* Tab/Pill Styling (New Color) - Perfect Gaping */
      .nav-pills .nav-item {
        padding: 0 5px; /* Added padding for better gaping */
      }
      .nav-pills .nav-link.active,
      .nav-pills .show > .nav-link {
        background-color: var(--primary-teal);
        color: #fff; /* White text on primary background */
        font-weight: 700;
        border: 1px solid var(--primary-teal);
      }
      .nav-pills .nav-link {
        color: #495057;
        border: 1px solid #ced4da;
        border-radius: 0.5rem;
        transition: all 0.2s ease-in-out;
      }

      /* --- MOBILE SWIPEABLE LAYOUT (FOR PLANS: Value, Standard, Pro) --- */
      .pricing-grid-swipeable {
        display: flex;
        gap: 1.5rem;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        padding-bottom: 1.5rem;
        -webkit-overflow-scrolling: touch;
        justify-content: flex-start;
      }

      .pricing-grid-swipeable::-webkit-scrollbar {
        display: none;
      }
      .pricing-grid-swipeable {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      /* Desktop Layout Overrides */
      @media (min-width: 992px) {
        .pricing-grid-swipeable {
          justify-content: center;
          overflow-x: hidden;
        }
        .pricing-card-new {
          flex: 1 1 300px;
          max-width: none;
          transform: none !important;
          min-height: 600px; /* Slightly taller for desktop readability */
        }
        .pricing-card-new.highlight {
          transform: scale(1.02);
        }
        .card-header-new h4 {
          font-size: 1.75rem; /* Larger font size for desktop */
        }
        .card-price-new {
          font-size: 3.5rem; /* Larger font size for desktop */
        }
        .card-features-new li {
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <section>
      <!-- Header -->
      <div class="header-wrapper">
        <nav class="navbar navbar-expand-lg navbar-clean">
          <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="../index.html">
              <img src="../images/Logo.png" alt="ThetaData Logo" height="32" />
            </a>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarContent"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarContent">
              <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link px-3" href="pricing-all.html"
                    ><i class="fas fa-dollar-sign"></i> Pricing</a
                  >
                </li>
                <li class="nav-item dropdown">
                  <a
                    class="nav-link px-3"
                    href="#"
                    id="docsDropdown"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fas fa-book"></i> Docs
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="docsDropdown">
                    <li>
                      <a
                        class="dropdown-item"
                        href="https://docs.thetadata.us/Articles/Getting-Started/Getting-Started.html"
                        target="_blank"
                      >
                        V3 Docs
                      </a>
                    </li>
                    <li>
                      <a
                        class="dropdown-item"
                        href="https://http-docs.thetadata.us/Articles/Getting-Started/Getting-Started.html"
                        target="_blank"
                      >
                        V2 Docs
                      </a>
                    </li>
                    <!-- Add other docs here if needed -->
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link px-3" href="https://discord.thetadata.us/"
                    ><i class="fab fa-discord"></i> Discord</a
                  >
                </li>
                <li class="nav-item dropdown">
                  <a
                    class="nav-link px-3"
                    href="#"
                    id="downloadsDropdown"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fas fa-download"></i> Downloads
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="downloadsDropdown">
                    <li>
                      <a
                        class="dropdown-item"
                        href="https://download-unstable.thetadata.us/ThetaTerminalv3.jar"
                        target="_blank"
                      >
                        V3 Terminal
                      </a>
                    </li>
                    <li>
                      <a
                        class="dropdown-item"
                        href="https://download-stable.thetadata.us/"
                        target="_blank"
                      >
                        V2 Terminal
                      </a>
                    </li>
                    <!-- Add other downloads here if needed -->
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link px-3" href="blog/dist"
                    ><i class="fas fa-blog"></i> Blog</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link px-3" href="careers.html"
                    ><i class="fas fa-briefcase"></i> Careers</a
                  >
                </li>
              </ul>
              <a href="signup.html" class="btn btn-get-started">Signup</a>
            </div>
          </div>
        </nav>
      </div>

    

    <div class="container py-3">
      <header class="pricing-header mb-5 text-center">
        <h1>Data Subscription Pricing</h1>
        <p>
          Access real-time and historical data for your trading and research
          needs.
        </p>
      </header>

      <div id="message-container"></div>

      <!-- Pricing Mode Toggle (Monthly/Annual) -->
      <div class="d-flex justify-content-center mb-4 price-toggle">
        <div class="btn-group" role="group" aria-label="Monthly/Annual Toggle">
          <button
            type="button"
            class="btn btn-outline-secondary"
            data-mode="monthly"
            onclick="togglePricingMode('monthly')"
          >
            Monthly
          </button>
          <button
            type="button"
            class="btn btn-outline-secondary active"
            data-mode="annual"
            onclick="togglePricingMode('annual')"
          >
            Annual
          </button>
        </div>
      </div>

      <!-- NEW: Data Type Navigation (Pills/Tabs) to shorten the page -->
      <ul class="nav nav-pills nav-fill mb-5" id="dataTypeTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="options-tab"
            data-bs-toggle="pill"
            data-bs-target="#options-pane"
            type="button"
            role="tab"
            aria-controls="options-pane"
            aria-selected="true"
          >
            Options
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="stocks-tab"
            data-bs-toggle="pill"
            data-bs-target="#stocks-pane"
            type="button"
            role="tab"
            aria-controls="stocks-pane"
            aria-selected="false"
          >
            Stocks
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="indices-tab"
            data-bs-toggle="pill"
            data-bs-target="#indices-pane"
            type="button"
            role="tab"
            aria-controls="indices-pane"
            aria-selected="false"
          >
            Indices
          </button>
        </li>
      </ul>

      <!-- NEW: Tab Content Container - Only one data type is shown at a time -->
      <div class="tab-content" id="dataTypeTabContent">
        <div
          class="tab-pane fade show active"
          id="options-pane"
          role="tabpanel"
          aria-labelledby="options-tab"
        >
          <!-- Options cards will be rendered here by JS -->
        </div>
        <div
          class="tab-pane fade"
          id="stocks-pane"
          role="tabpanel"
          aria-labelledby="stocks-tab"
        >
          <!-- Stocks cards will be rendered here by JS -->
        </div>
        <div
          class="tab-pane fade"
          id="indices-pane"
          role="tabpanel"
          aria-labelledby="indices-tab"
        >
          <!-- Indices cards will be rendered here by JS -->
        </div>
      </div>

      <hr class="my-5" />

      <div
        id="subscription-form-section"
        class="row justify-content-center"
        style="display: none"
      >
        <div class="col-lg-8">
          <div class="subscription-form">
            <h2 class="text-center mb-4">Complete Your Subscription</h2>
            <div class="alert alert-info" role="alert">
              You are subscribing to:
              <strong id="selected-plan-display"></strong> (<span
                id="selected-type-display"
              ></span>
              data, billed <span id="selected-mode-display">Annual</span>)
            </div>
            <form id="subscribe-form">
              <input type="hidden" name="action" value="subscribe" />
              <input
                type="hidden"
                name="plan"
                id="selected-plan-input"
                value=""
              />
              <input
                type="hidden"
                name="data_type"
                id="selected-type-input"
                value=""
              />
              <input
                type="hidden"
                name="payment_mode"
                id="selected-mode-input"
                value="annual"
              />
              <div class="mb-3">
                <label for="full_name" class="form-label">Full Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="full_name"
                  name="full_name"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  name="email"
                  required
                />
              </div>
              <div class="mb-3 form-check">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="terms"
                  required
                />
                <label class="form-check-label" for="terms"
                  >I agree to the Terms & Conditions</label
                >
              </div>
              <button type="submit" class="btn btn-subscribe-new btn-lg w-100">
                Confirm & Proceed to Payment
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

        <!-- Footer -->
    <footer class="site-footer py-5">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12 text-center footer-content">
            <div class="social-icons mb-4">
              <a
                href="https://www.instagram.com/theta.data/"
                class="social-link mx-2"
                aria-label="Instagram"
              >
                <i class="fa-brands fa-instagram"></i>
              </a>
              <a
                href="https://m.facebook.com/Theta-Data-106395478825243/"
                class="social-link mx-2"
                aria-label="Facebook"
              >
                <i class="fa-brands fa-facebook"></i>
              </a>
              <a
                href="https://twitter.com/theta_data"
                class="social-link mx-2"
                aria-label="Twitter"
              >
                <i class="fa-brands fa-twitter"></i>
              </a>
              <a
                href="https://www.linkedin.com/company/axiomx-theta-data/?viewAsMember=true"
                class="social-link mx-2"
                aria-label="Linkedin"
              >
                <i class="fa-brands fa-linkedin"></i>
              </a>
            </div>
            <p class="copyright-text mb-1">
              Axonix LLC Theta Data &copy;2020-<span id="footer-year"></span>
            </p>
            <p class="contact-info mb-1">
              <a href="mailto:support@thetadata.net" class="footer-link">support@thetadata.net</a>
            </p>
            <p class="contact-info mb-4">
              Market Data Emergency (646)-875-8005
            </p>
            <div class="utility-links d-flex flex-column align-items-center">
              <a
                href="pages/terms-and-conditions.html"
                class="footer-link-underline mb-1"
              >
                Terms & Conditions
              </a>
              <a
                href="pages/privacy-policy.html"
                class="footer-link-underline mb-1"
              >
                Privacy Policy
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <style>
      :root {
        --footer-bg: #f8f8f8;
        --footer-text: #6c757d;
        --footer-icon: #868e96;
      }

      .site-footer {
        background-color: var(--footer-bg);
        color: var(--footer-text);
      }

      .footer-content {
        max-width: 400px;
        margin: 0 auto;
      }

      /* Prevent underlines/underscores and remove inline-gap artifacts */
      .site-footer a,
      .site-footer a * {
        text-decoration: none !important;
      }

      .social-icons {
        /* keep icons vertically centered and remove any extra line height */
        display: flex;
        justify-content: center;
        gap: 12px;
        align-items: center;
        line-height: 1;
        margin-bottom: 0.5rem;
      }

      .social-link {
        color: var(--footer-icon);
        font-size: 1.8rem;
        transition: color 0.3s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
      }

      .social-link:hover {
        color: #495057;
      }

      .copyright-text,
      .contact-info {
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .footer-link {
        color: var(--footer-text);
        text-decoration: none;
        transition: color 0.3s;
      }

      .footer-link:hover {
        color: #495057;
      }

      .footer-link-underline {
        color: var(--footer-text);
        font-size: 0.9rem;
        text-decoration: underline;
        text-underline-offset: 3px;
        transition: color 0.3s;
      }

      .footer-link-underline:hover {
        color: #495057;
      }

      @media (max-width: 575.98px) {
        .site-footer {
          padding-top: 3rem !important;
          padding-bottom: 3rem !important;
        }
        .social-link {
          font-size: 1.5rem;
          width: 32px;
          height: 32px;
        }
      }
    </style>
    <script>
      // set footer year
      (function () {
        const el = document.getElementById("footer-year");
        if (el) el.textContent = new Date().getFullYear();
      })();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // --- 1. DATA STRUCTURE ---
      const PLANS = {
        Options: {
          monthly: {
            Value: {
              price: 40,
              description: "Best for beginners.",
              features: [
                "100% market coverage",
                "US index & stock options",
                "Real-time access",
                "Unlimited requests",
                "3 Request types",
                "4 Years of data",
                "Low latency snapshots",
                "API Support",
                "1 minute intervals",
              ],
            },
            Standard: {
              price: 80,
              description: "Best for research.",
              features: [
                "100% market coverage",
                "US index & stock options",
                "Real-time access",
                "Unlimited requests",
                "7 Request types",
                "8 Years of data",
                "Low latency snapshots",
                "API Support",
                "Tick level data",
                "Option Chain Snapshots",
                "15K Trade streams",
                "10K Quote streams",
              ],
            },
            Pro: {
              price: 160,
              description: "Best for live trading.",
              features: [
                "100% market coverage",
                "US index & stock options",
                "Real-time access",
                "Unlimited requests",
                "12 Request types",
                "12 Years of data",
                "Low latency snapshots",
                "API Support",
                "Tick level data",
                "Option Root Snapshots",
                "Stream every option trade",
                "15K Quote streams",
              ],
            },
          },
          annual: {
            Value: {
              price: 32,
              description: "Best for beginners.",
              features: [
                "100% market coverage",
                "US index & stock options",
                "Real-time access",
                "Unlimited requests",
                "3 Request types",
                "4 Years of data",
                "Low latency snapshots",
                "API Support",
                "1 minute intervals",
              ],
            },
            Standard: {
              price: 64,
              description: "Best for research.",
              features: [
                "100% market coverage",
                "US index & stock options",
                "Real-time access",
                "Unlimited requests",
                "7 Request types",
                "8 Years of data",
                "Low latency snapshots",
                "API Support",
                "Tick level data",
                "Option Chain Snapshots",
                "15K Trade streams",
                "10K Quote streams",
              ],
            },
            Pro: {
              price: 128,
              description: "Best for live trading.",
              features: [
                "100% market coverage",
                "US index & stock options",
                "Real-time access",
                "Unlimited requests",
                "12 Request types",
                "12 Years of data",
                "Low latency snapshots",
                "API Support",
                "Tick level data",
                "Option Root Snapshots",
                "Stream every option trade",
                "15K Quote streams",
              ],
            },
          },
        },
        Stocks: {
          monthly: {
            Value: {
              price: 30,
              description: "Best for beginners.",
              features: [
                "100% market coverage",
                "US listed & OTC stocks",
                "15-minute delayed access",
                "Unlimited requests",
                "3 Request types",
                "4 Years of data",
                "Low latency snapshots",
                "API Support",
                "15 minute intervals",
              ],
            },
            Standard: {
              price: 80,
              description: "Best for research.",
              features: [
                "100% market coverage",
                "US listed & OTC stocks",
                "Real-time access",
                "Unlimited requests",
                "6 Request types",
                "4 Years of CTA data",
                "8 Years of UTP data",
                "Low latency snapshots",
                "API Support",
                "1 minute intervals",
                "1K Trade streams",
                "1K Quote streams",
              ],
            },
            Pro: {
              price: 160,
              description: "Best for live trading.",
              features: [
                "100% market coverage",
                "US listed & OTC stocks",
                "Real-time access",
                "Unlimited requests",
                "6 Request types",
                "8 Years of CTA data",
                "12 Years of UTP data",
                "Low latency snapshots",
                "API Support",
                "Tick level data",
                "Stream every stock trade",
                "2K Quote streams",
              ],
            },
          },
          annual: {
            Value: {
              price: 25,
              description: "Best for beginners.",
              features: [
                "100% market coverage",
                "US listed & OTC stocks",
                "15-minute delayed access",
                "Unlimited requests",
                "3 Request types",
                "4 Years of data",
                "Low latency snapshots",
                "API Support",
                "15 minute intervals",
              ],
            },
            Standard: {
              price: 64,
              description: "Best for research.",
              features: [
                "100% market coverage",
                "US listed & OTC stocks",
                "Real-time access",
                "Unlimited requests",
                "6 Request types",
                "4 Years of CTA data",
                "8 Years of UTP data",
                "Low latency snapshots",
                "API Support",
                "1 minute intervals",
                "1K Trade streams",
                "1K Quote streams",
              ],
            },
            Pro: {
              price: 128,
              description: "Best for live trading.",
              features: [
                "100% market coverage",
                "US listed & OTC stocks",
                "Real-time access",
                "Unlimited requests",
                "6 Request types",
                "8 Years of CTA data",
                "12 Years of UTP data",
                "Low latency snapshots",
                "API Support",
                "Tick level data",
                "Stream every stock trade",
                "2K Quote streams",
              ],
            },
          },
        },
        Indices: {
          monthly: {
            Value: {
              price: 30,
              description: "Best for beginners.",
              features: [
                "6500 historic symbols",
                "1-day delayed access",
                "Unlimited requests",
                "2 Request types",
                "2 Years of data",
                "Low latency snapshots",
                "API Support",
                "15 minute intervals",
              ],
            },
            Standard: {
              price: 50,
              description: "Best for research.",
              features: [
                "6500 historic symbols",
                "Real-time SPX & VIX",
                "Unlimited requests",
                "2 Request types",
                "3 Years of data",
                "Low latency snapshots",
                "API Support",
                "1 minute intervals",
                "Snapshots",
                "3 Price streams",
              ],
            },
            Pro: {
              price: 100,
              description: "Best for live trading.",
              features: [
                "6500 historic symbols",
                "Real-time SPX & VIX",
                "Unlimited requests",
                "2 Request types",
                "7 Years of data",
                "Low latency snapshots",
                "API Support",
                "Tick level data",
                "Snapshots",
                "100 Price streams",
              ],
            },
          },
          annual: {
            Value: {
              price: 24,
              description: "Best for beginners.",
              features: [
                "6500 historic symbols",
                "1-day delayed access",
                "Unlimited requests",
                "2 Request types",
                "2 Years of data",
                "Low latency snapshots",
                "API Support",
                "15 minute intervals",
              ],
            },
            Standard: {
              price: 40,
              description: "Best for research.",
              features: [
                "6500 historic symbols",
                "Real-time SPX & VIX",
                "Unlimited requests",
                "2 Request types",
                "3 Years of data",
                "Low latency snapshots",
                "API Support",
                "1 minute intervals",
                "Snapshots",
                "3 Price streams",
              ],
            },
            Pro: {
              price: 80,
              description: "Best for live trading.",
              features: [
                "6500 historic symbols",
                "Real-time SPX & VIX",
                "Unlimited requests",
                "2 Request types",
                "7 Years of data",
                "Low latency snapshots",
                "API Support",
                "Tick level data",
                "Snapshots",
                "100 Price streams",
              ],
            },
          },
        },
      };

      // --- 2. UTILITY FUNCTIONS ---

      function createLinkText(featureString) {
        const linkPatterns = {
          "Request types":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#options-data"',
          "Years of data":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#options-data"',
          "latency snapshots":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#options-data"',
          "Trade streams":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html"',
          "Quote streams":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html"',
          "Price streams":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#index-data"',
          "historic symbols":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#index-data"',
          "Option Chain Snapshots":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#options-data"',
          "Option Root Snapshots":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#options-data"',
          "Stream every option trade":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#stock-data"',
          "Stream every stock trade":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#stock-data"',
          "Years of UTP data":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#stock-data"',
          "Years of CTA data":
            'href="https://http-docs.thetadata.us/Articles/Getting-Started/Subscriptions.html#stock-data"',
        };

        let output = featureString;

        for (const term in linkPatterns) {
          const url = linkPatterns[term];
          const replacement = `<a class='doc-link' ${url}>${term}</a>`;
          // Use regex for case-insensitive global replacement
          output = output.replace(new RegExp(term, "gi"), replacement);
        }

        // Wrap numbers before a link in a span
        output = output.replace(
          /(\d+)\s(<a)/g,
          '<span class="linked-number">$1</span> $2'
        );
        return output;
      }

      // --- 3. RENDERING LOGIC (Modified for Tabs) ---

      function renderPricingSections() {
        const tabContent = document.getElementById("dataTypeTabContent");
        if (!tabContent) return;

        for (const dataType in PLANS) {
          const modes = PLANS[dataType];
          const tabPaneId = `${dataType.toLowerCase()}-pane`;
          const tabPane = document.getElementById(tabPaneId);

          if (tabPane) {
            // The swipeable grid now lives inside the tab pane
            const pricingGridHtml = `
                    <div class="pricing-grid-swipeable">
                        ${["Value", "Standard", "Pro"]
                          .map((planName) => {
                            const isStandard = planName === "Standard";

                            const features = modes.annual[planName].features
                              .map(
                                (feature) => `
                                <li>
                                    <svg class="bi" width="16" height="16" fill="currentColor"><use xlink:href="#check"/></svg>
                                    ${createLinkText(feature)}
                                </li>
                            `
                              )
                              .join("");

                            return `
                                <div class="pricing-card-new ${
                                  isStandard ? "highlight" : ""
                                }">
                                    
                                    ${
                                      isStandard
                                        ? '<div class="popular-ribbon">POPULAR</div>'
                                        : ""
                                    }

                                    <div class="card-header-new">
                                        <h4 class="card-title">${planName}</h4>
                                        <p class="text-muted small mb-0">${
                                          modes.monthly[planName].description
                                        }</p>
                                    </div>

                                    <div class="card-body-new">
                                        <div class="card-price-new mb-3">
                                            <span class="price-mode-monthly" data-plan="${planName}" data-type="${dataType}">
                                                $${
                                                  modes.monthly[planName].price
                                                }<small class="fw-light">/mo</small>
                                            </span>
                                            <span class="price-mode-annual" data-plan="${planName}" data-type="${dataType}">
                                                $${
                                                  modes.annual[planName].price
                                                }<small class="fw-light">/mo</small>
                                            </span>
                                        </div>

                                        <ul class="card-features-new">
                                            ${features}
                                        </ul>

                                        <button type="button"
                                                class="w-100 btn btn-lg btn-subscribe-new subscribe-btn"
                                                data-plan="${planName}"
                                                data-type="${dataType}"
                                                onclick="showForm('${dataType}', '${planName}')">
                                            Subscribe Now
                                        </button>
                                    </div>
                                </div>
                            `;
                          })
                          .join("")}
                    </div>
                `;
            tabPane.innerHTML = pricingGridHtml;
          }
        }
        // Initialize with default mode
        togglePricingMode("annual");
      }

      // --- 4. INTERACTION LOGIC ---

      let currentPaymentMode = "annual";

      function togglePricingMode(mode) {
        currentPaymentMode = mode;

        // Buttons
        document.querySelectorAll(".price-toggle .btn").forEach((btn) => {
          btn.classList.remove("active");
        });
        document
          .querySelector(`.price-toggle .btn[data-mode="${mode}"]`)
          .classList.add("active");

        // Prices visibility
        document.querySelectorAll(".price-mode-monthly").forEach((el) => {
          el.classList.remove("active");
        });
        document.querySelectorAll(".price-mode-annual").forEach((el) => {
          el.classList.remove("active");
        });
        document.querySelectorAll(`.price-mode-${mode}`).forEach((el) => {
          el.classList.add("active");
        });

        // Update form inputs/display
        const modeDisplay = document.getElementById("selected-mode-display");
        const modeInput = document.getElementById("selected-mode-input");
        if (modeDisplay) {
          modeDisplay.textContent =
            mode.charAt(0).toUpperCase() + mode.slice(1);
        }
        if (modeInput) {
          modeInput.value = mode;
        }
      }

      function showForm(dataType, planName) {
        // Find the correct price element based on active mode and selected plan/type
        const priceElement = document.querySelector(
          `#${dataType.toLowerCase()}-pane .price-mode-${currentPaymentMode}[data-plan="${planName}"]`
        );
        const price = priceElement
          ? priceElement.textContent.trim()
          : "Price Unavailable";
        const fullPlanName = `${planName} (${price})`;

        document.getElementById("selected-plan-input").value = planName;
        document.getElementById("selected-type-input").value = dataType;
        document.getElementById("selected-plan-display").textContent =
          fullPlanName;
        document.getElementById("selected-type-display").textContent = dataType;

        document.getElementById("subscription-form-section").style.display =
          "flex";
        document
          .getElementById("subscription-form-section")
          .scrollIntoView({ behavior: "smooth" });
      }

      // --- 5. FORM SUBMISSION (Simulate processing) ---
      document
        .getElementById("subscribe-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const form = event.target;
          const plan_name = form.querySelector("#selected-plan-input").value;
          const data_type = form.querySelector("#selected-type-input").value;
          const payment_mode = form.querySelector("#selected-mode-input").value;
          const email = form.querySelector("#email").value;

          const messageContainer = document.getElementById("message-container");
          messageContainer.innerHTML = ""; // Clear previous message

          if (email && email.includes("@") && email.includes(".")) {
            const successMessage = `
                <div class='alert alert-success mt-4' role='alert'> 
                    <strong>Success!</strong> You selected the 
                    <strong>${data_type} / ${plan_name} / ${
              payment_mode.charAt(0).toUpperCase() + payment_mode.slice(1)
            }</strong> plan. 
                    A confirmation has been sent to ${email}. 
                </div>`;
            messageContainer.insertAdjacentHTML("beforeend", successMessage);
            form.reset();
            document.getElementById("subscription-form-section").style.display =
              "none";
          } else {
            const errorMessage = `
                <div class='alert alert-danger mt-4' role='alert'> 
                    <strong>Error!</strong> Please enter a valid email address. 
                </div>`;
            messageContainer.insertAdjacentHTML("beforeend", errorMessage);
          }
          messageContainer.scrollIntoView({ behavior: "smooth" });
        });

      // --- 6. Initialization (Scroll to Standard on mobile view) ---
      window.onload = function () {
        renderPricingSections();

        // Scroll to center the "Standard" card on mobile for the default "Options" tab
        const scrollToStandard = () => {
          if (window.innerWidth < 992) {
            // Find the first Standard card (Options/Standard)
            const standardCard = document.querySelector(
              "#options-pane .pricing-card-new.highlight"
            );
            if (standardCard) {
              // Find the swipeable container
              const swiperContainer = standardCard.closest(
                ".pricing-grid-swipeable"
              );
              if (swiperContainer) {
                // Calculate scroll position to center the card
                const scrollX =
                  standardCard.offsetLeft -
                  swiperContainer.offsetWidth / 2 +
                  standardCard.offsetWidth / 2;
                // Use a slight delay to ensure the layout has fully rendered
                setTimeout(() => {
                  swiperContainer.scrollLeft = scrollX;
                }, 100);
              }
            }
          }
        };

        scrollToStandard();

        // Add event listener to scroll Standard card into view whenever a new tab is selected
        const tabEl = document.getElementById("dataTypeTabs");
        const tab = new bootstrap.Tab(tabEl);
        tabEl.addEventListener("shown.bs.tab", (event) => {
          // Find the active tab pane
          const activeTabPaneId = event.target.getAttribute("data-bs-target");
          const activeTabPane = document.querySelector(activeTabPaneId);

          if (window.innerWidth < 992 && activeTabPane) {
            const standardCard = activeTabPane.querySelector(
              ".pricing-card-new.highlight"
            );
            if (standardCard) {
              const swiperContainer = standardCard.closest(
                ".pricing-grid-swipeable"
              );
              if (swiperContainer) {
                const scrollX =
                  standardCard.offsetLeft -
                  swiperContainer.offsetWidth / 2 +
                  standardCard.offsetWidth / 2;
                // Use a slight delay to ensure the layout has fully rendered
                setTimeout(() => {
                  swiperContainer.scrollLeft = scrollX;
                }, 100);
              }
            }
          }
        });
      };
    </script>
    <!-- SVG Checkmark icon used in feature lists -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
      <symbol id="check" viewBox="0 0 16 16">
        <path
          d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.96-4.96z"
        />
      </symbol>
    </svg>
  </body>
</html>
